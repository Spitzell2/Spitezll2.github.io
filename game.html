<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="game.css">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
    <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
    <title> SA </title>
</head>
<body>

    <script src="game.js"></script>
    <script src="video.js"></script>
    <script src="opciones.js"></script>
    <script src="lista.js"></script>
    <script src="filtros.js"></script>
    <script src="switchmp3.js"></script>
    <script src="sa.js"></script>
    <script src="anilist.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
        function fetchMediaList(username) {
            // URL de la API de AniList
            const apiUrl = 'https://graphql.anilist.co';
                
            // Variables de la consulta
            const variables = {
                user: username // Asegúrate de que el nombre de la variable coincida con el nombre que has utilizado en la consulta GraphQL
            };
            // Consulta GraphQL para obtener el ID del usuario
            const query = `
            query ($user: String) {
                MediaListCollection(userName: $user, type: ANIME) {
                    lists {
                        entries {
                            status
                            media {
                                id
                            }
                        }
                    }
                }
            }
            `;
            
            // Realizar la solicitud a la API de AniList
            axios.post(apiUrl, {
                query: query,
                variables: variables
            })
            .then(response => {
                // Manejar la respuesta
                const entries = response.data.data.MediaListCollection.lists[0].entries;
                guardarID(response.data.data.MediaListCollection.lists[0])
                entries.forEach(entry => {
                    const status = entry.status;
                    const id = entry.media.id;
                    //console.log("Status:", status, "ID:", id);
                });
            })

            .catch(error => {
                // Manejar errores
                console.error('Error:', error);
            });
        }
    </script>

    <div id="modosPantalla">
        <input type="button" id="screenMode" onclick="darkMode()" value="Lightmode">
        <a target="_blank" href="../recuperar.html">Recuperar</a>
        <label onchange="switchMedia()">
          <input type="radio" name="media" value="video" checked> Video
        </label>
        <label onchange="switchMedia()">
          <input type="radio" name="media" value="audio"> Audio
        </label>
        <br>
        Nº de canciones:
        <a id="contador">0</a>
    </div>
    <br>
    <a id ='atributo' target="_blank" href=''> <label id="info"> </label> </a>

    <div class="container">
        <div id="infovideo" class="left">
            <video id="video" width="700" height="350" controls>  
                <source src="">
            </video>
        </div>

        <div id="selects" class="right-top">
                
            <section id="elegirSeason">
                Season
                <select id="selectSeason" onchange="anadirSeason()">
                    <option value="--">--</option>
                    <option value="Winter">Winter</option>
                    <option value="Spring">Spring</option>
                    <option value="Summer">Summer</option>
                    <option value="Fall">Fall</option>
                    <option value="All">All</option>
                </select>
            </section>
                
            Canciones
            <select id="selectCancion" onchange="cambiarCancion()">
                <option value="--">--</option>       
            </select>
        </div>
    </div>

    <div class="infoSong">
        <div id=tablaInfo class="right-bottom">
            <table id="tablaCancion">
                <tr>
                    <th>Info</th>
                </tr>
            </table>
        </div>

        <div id=tablaInfoRespuesta class="right-bottom">
            <table id="tablaCancionRespuesta">
                <tr>
                    <th>Info2</th>
                </tr>
                <tr>
                    <td id="songNameSA"></td>
                </tr>
                <tr>
                    <td id="artistSA"></td>
                </tr>
            </table>
        </div>
    </div>

    <div id="divRespuesta">
        <textarea id="respuesta" rows="2" cols="80" placeholder="..."></textarea>
    </div>

    <div id="botones">
        <input type="button" id="restaurar" value="Restaurar">  
        <input type="button" id="next" value="Siguiente">
        <input type="button" id="start" value="Inicio">
        <input type="button" id="loop" value="Loop">
        <input type="button" id="eliminada" value="Eliminar">
    </div>

    <div id=tablaInfo2>
        <table id="tablaNombres">
            <tr>
                <th>Nombres: </th>
            </tr>
            <tr>
                <td id="romaji">Romaji: </td>
            </tr>
            <tr>
                <td id="english">English: </td>
            </tr>
        </table>
    </div>
        
</body>
</html>